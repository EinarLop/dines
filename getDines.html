<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lora&family=Nunito+Sans&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/styles.css">
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

    <title>Dines</title>
</head>


<script>
  let cookie = document.cookie
 let i = cookie.indexOf("=")
 let user_id = cookie.substring(i+1)
 let route = "user_id="+user_id;

    $(window).load(function(){
        
			
			$.ajax({
                url: 'http://localhost/dines/api/getDines.php',
				type: 'POST',
				dataType: "JSON",
                data: route,
                success: () => {console.log(1)}
            })

                .done(function(res){
                    console.log(res)
                container = $("#card__container")
                    
                    $.each(res, function (index, dine) {
                        container.html(container.html() + 
                        
                        
                        
                    ` <div class="card">
            <picture class="image__container">
                <img class="image"src="${dine.image}" alt="">
            </picture>
        <div class="card__division">
        </div>
            <div class="card__content">
                <p class="content__title">${dine.name}</p>
                <p class="content__description"> <b>User: </b>${dine.username}</p>
                <p class="content__description"> <b>About: </b>${dine.description}</p>
                <p class="content__description"> <b>Price:</b> 100$</p>
                <p class="content__description"> <b>Raiting:</b> ${dine.score}/5</p>
                <p class="content__description"> <b>Restaurant:</b> ${dine.restaurant}</p>
                <p class="content__address"> <b>Address: </b> ${dine.address}</p>
                
            </div>
            </div> `


                        
                        
                        )  
                });
            }   
    ) .fail(function(error){
        console.log(error.responseText)
    })

    })


</script>
<body>
    <header>
        <nav ><a class="icon" href="index.html">
            dines
        </a></nav>
        <nav class="nav__container">
            <a href="createDine.html"class="nav">
             Create dine
            </a>
            <a href="getMyDines.html"class="nav">
                My dines
            </a>
            <a href="getDines.html" class="nav">
                Community dines
            </a>
            <a class="nav" href="login.html">
                Login/Register
            </a>
        </nav>
    </header>

    <main id="card__container" class="card__container">
       
    
    </main>

 
    
</body>
</html>